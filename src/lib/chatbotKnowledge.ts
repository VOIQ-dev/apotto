/**
 * チャットボット用のシステム知識ベース
 * このシステムの使い方や機能について回答するための情報
 */

export const SYSTEM_KNOWLEDGE = `
# システム概要

このシステムは「AI営業フォーム自動送信システム」です。
見込み客（リード）情報をアップロードし、AIが各企業に合わせたパーソナライズされた問い合わせ文言を自動生成し、企業の問い合わせフォームに自動送信できます。

---

# 主な機能

## 1. リード管理
見込み客情報をCSV/Excelファイルでアップロードして管理できます。

### CSVファイルの形式
以下のカラムを含むファイルを用意してください：
- **企業名** (必須): 送信先企業の名前
- **ホームページURL** (必須): 企業のWebサイトURL（AIがクローリングして情報を取得します）
- **担当者名**: 担当者の名前（任意）
- **部署**: 担当者の部署（任意）
- **役職**: 担当者の役職（任意）
- **備考**: メモや追加情報（任意）

### インポート手順
1. 画面左上の「リード取り込み」セクションで「ファイルを選択」をクリック
2. CSV または Excel ファイルを選択
3. カラムのマッピングを確認
4. 「取り込み」ボタンをクリック

---

## 2. 送信者情報の設定
フォーム送信時に使用する自社情報を設定します。

### 必須項目
- 会社名
- 担当者名（姓・名）
- ふりがな
- メールアドレス
- 電話番号
- 郵便番号・住所
- 問い合わせ件名

### 任意項目
- 商談日程URL: Calendlyなどの予約ページURLを設定すると、本文に自動で挿入されます

---

## 3. PDF資料の添付
提案資料をPDFでアップロードし、問い合わせ文言内にリンクとして挿入できます。

### アップロード手順
1. 「PDF資料管理」セクションで「PDFをアップロード」をクリック
2. ファイルを選択してアップロード
3. 文言生成時に添付するPDFにチェックを入れる

### 特徴
- PDFは開封トラッキング付きのリンクとして挿入されます
- 相手がPDFを開いたかどうかを確認できます

---

## 4. AI問い合わせ文言生成
各リードに対してAIが自動で問い合わせ文言を生成します。

### 生成の仕組み
1. リードのホームページURLをAIがクローリング
2. 企業の事業内容やサービスを分析
3. 送信者情報と組み合わせてパーソナライズされた文言を作成

### 生成手順
1. リード一覧から対象のリードを選択
2. 「文言生成」ボタンをクリック
3. 生成された文言を確認・編集
4. 問題なければ「送信」

### トーンの選択
- **フレンドリー**: ビジネスライクかつ親しみやすい（デフォルト）
- **フォーマル**: 丁寧でかしこまった文体
- **カジュアル**: くだけた親しみやすい文体

---

## 5. フォーム送信（Chrome拡張機能）
生成した文言を企業の問い合わせフォームに自動送信できます。

### 送信の仕組み
Chrome拡張機能を使用してブラウザから直接フォーム送信を行います。

**重要**: 送信にはChrome拡張機能のインストールが必要です。
- 拡張機能がインストールされている場合: 「✓ Chrome拡張機能に接続中」と表示されます
- 未インストールの場合: 警告メッセージが表示されます

### 送信方法
1. **一括送信**: リード一覧から複数のリードを選択して「チェック済み企業へ一括送信」をクリック
2. キューに追加され、拡張機能が自動的に1件ずつ処理します
3. **実行ログ**で進捗をリアルタイムで確認できます

### 送信の流れ
1. 送信ボタンをクリック → キューに追加
2. 拡張機能が自動的に各企業のサイトを開く
3. フォームを検出・入力・送信
4. **全件完了後**、自動的にリード表に結果が反映されます

### 送信ステータス
- **未送信**: まだ送信していない
- **成功**: フォーム送信が完了しました
- **失敗**: フォームが見つからない、または送信エラー
- **送信不可**: URLが無効、または対応外のサイト

### 拡張機能のPopup
Chrome拡張機能のアイコンをクリックすると、詳細な送信状況を確認できます：
- **待機中**: これから処理するアイテム数
- **処理中**: 現在処理中のアイテム数（アイコンが回転します）
- **完了**: 送信成功したアイテム数
- **失敗**: 送信失敗したアイテム数

### ログの削除
拡張機能Popupの「キューと失敗ログを削除」ボタンで、完了と失敗のログを削除できます。
- **送信中（待機中・処理中）は削除できません**
- 全ての処理が完了してから削除してください

---

## 6. ダッシュボード
送信状況や成果を確認できます。

### 確認できる指標
- 送信数
- PDF閲覧数
- アポイント獲得数

---

# よくある質問

## Q: フォーム送信ができません
A: 以下を確認してください：
1. **Chrome拡張機能がインストールされているか**
   - 「✓ Chrome拡張機能に接続中」と表示されているか確認
   - 未表示の場合は拡張機能をインストールしてください
2. 送信者情報が全て入力されているか
3. 対象企業のホームページURLが正しいか
4. Chromeブラウザを使用しているか（他のブラウザでは動作しません）

## Q: 送信が完了したのにリード表に反映されません
A: リード表への反映は**拡張機能のキューが全て完了した後**に自動で行われます。
1. 拡張機能のPopupを開いて「待機中」と「処理中」が0になるまで待ってください
2. 全て完了すると自動的にリード表が更新されます
3. 途中で送信を追加した場合、追加分も含めて全て完了するまで待つ必要があります

## Q: 拡張機能のキューを削除したい
A: 拡張機能Popupの「キューと失敗ログを削除」ボタンを使用してください。
- **注意**: 送信中（待機中・処理中）はログを削除できません
- 全ての処理が完了してから削除してください
- 削除すると完了と失敗のログが消えますが、リード表には既に反映されています

## Q: AI生成に時間がかかります
A: AIはホームページをクローリングして分析するため、10〜30秒程度かかることがあります。

## Q: 生成された文言を編集できますか？
A: はい、生成後に自由に編集できます。編集後に送信してください。

## Q: PDFの開封を確認するには？
A: リード一覧の「インテントスコア」で確認できます。PDFを開いたリードはスコアが高くなります。

---

# 効果的な問い合わせ文言のコツ

## 1. 件名を工夫する
- 具体的で興味を引く件名にする
- 長すぎず、20〜30文字程度が最適

## 2. 相手企業への言及
- AIが自動で企業情報を盛り込みますが、より具体的な言及があると効果的
- 「備考」欄に追加情報を入れるとAIが活用します

## 3. 明確なCTA（行動喚起）
- 「15分のオンライン打ち合わせ」など具体的なアクションを提案
- 商談日程URLを設定すると予約への導線がスムーズ

## 4. 適切な資料リンク
- 提案資料やサービス紹介PDFのリンクを入れると説得力アップ
- 開封トラッキングで興味度を測定

---

# プロダクトコンテキスト

「自社プロダクト情報」セクションで以下を設定すると、より効果的な文言が生成されます：

- **サービス名・商材名**: 自社サービスの正式名称
- **主な特徴・強み**: 競合との差別化ポイント
- **ターゲット業界**: 主要なターゲット業界
- **導入実績**: 具体的な導入事例や数値
- **価格帯**: 価格レンジ（任意）
`;

/**
 * 定型質問とその即座回答のマッピング（API不要）
 */
export const QUICK_ANSWERS: Record<string, string> = {
  システムの使い方を教えて: `このシステムの基本的な使い方をご説明します。

**ステップ1: Chrome拡張機能のインストール**
まず、Chrome拡張機能をインストールしてください。
「✓ Chrome拡張機能に接続中」と表示されていればOKです。

**ステップ2: 送信者情報の設定**
「送信者情報」セクションで、会社名、担当者名、メールアドレス、電話番号などの必須項目を入力してください。

**ステップ3: リードのインポート**
「リード取り込み」セクションでCSVまたはExcelファイルをアップロードします。
必須項目は「企業名」と「ホームページURL」です。

**ステップ4: 文言生成**
リード一覧から対象企業を選択し、「文言生成」ボタンをクリックします。
AIが企業のホームページをクローリングして、パーソナライズされた問い合わせ文言を自動生成します。

**ステップ5: 確認・編集**
生成された文言を確認し、必要に応じて編集できます。

**ステップ6: 送信**
「チェック済み企業へ一括送信」ボタンで拡張機能のキューに追加されます。
自動的に1件ずつ処理され、**全て完了した後**にリード表に結果が反映されます。

**進捗確認**
・実行ログでリアルタイムに進捗を確認できます
・拡張機能のPopupで詳細なステータスを確認できます

他にご質問があればお気軽にお聞きください！`,

  "効果的な文言のコツは？": `効果的な問い合わせ文言を作成するコツをご紹介します。

**1. 具体的で興味を引く件名**
・抽象的な「ご提案」ではなく、具体的な提案内容を含める
・20〜30文字程度が最適
・例: 「営業効率化ツールのご紹介」

**2. 相手企業への具体的な言及**
・AIが自動で企業情報を分析しますが、「備考」欄に追加情報を入れるとより効果的
・企業の事業内容やサービスに触れる

**3. 明確な行動喚起（CTA）**
・「15分のオンライン打ち合わせ」など具体的なアクションを提案
・商談日程URLを設定すると予約がスムーズ

**4. PDF資料リンクの活用**
・提案資料やサービス紹介PDFのリンクを入れると説得力アップ
・開封トラッキングで興味度を測定できます

**5. トーンの選択**
・フレンドリー: ビジネスライクかつ親しみやすい（推奨）
・フォーマル: 丁寧でかしこまった文体
・カジュアル: くだけた親しみやすい文体

他にご質問があればお気軽にどうぞ！`,

  "CSVファイルの形式は？": `CSVファイルのフォーマットについてご説明します。

**必須項目（2つ）**
1. **企業名**: 送信先企業の正式名称
2. **ホームページURL**: 企業のWebサイトURL
   ・AIがこのURLをクローリングして企業情報を取得します
   ・「https://」から始まる完全なURLを記載

**任意項目（あると便利）**
・**担当者名**: 担当者がわかる場合
・**部署**: 担当部署がわかる場合
・**役職**: 担当者の役職
・**備考**: 追加情報やメモ
  ・ここに書いた内容をAIが文言生成時に活用します

**ファイル形式**
・CSV形式（.csv）
・Excel形式（.xlsx、.xls）
両方対応しています。

**文字コード**
・UTF-8またはShift-JISに対応
・文字化けが発生した場合は自動で検出して変換します

サンプルファイルは「リード取り込み」セクションからダウンロードできます。`,

  "PDF資料の添付方法は？": `PDF資料の添付方法をご説明します。

**アップロード手順**
1. 画面の「PDF資料管理」セクションを探す
2. 「PDFをアップロード」ボタンをクリック
3. お使いのPCからPDFファイルを選択
4. アップロード完了を待つ

**文言生成時の設定**
・文言を生成する際、アップロード済みのPDF一覧が表示されます
・添付したいPDFにチェックを入れてください
・複数のPDFを選択することも可能です

**PDFの挿入方法**
・PDFは開封トラッキング付きのリンクとして文言内に挿入されます
・相手がリンクをクリックしたかどうかを確認できます
・「{{PDF_LINK_1}}」のようなプレースホルダーが表示されます

**トラッキング機能**
・リード一覧の「インテントスコア」でPDF開封状況を確認できます
・PDFを開いたリードは興味度が高いと判断されます

他にご質問があればお気軽にどうぞ！`,

  "Chrome拡張機能の使い方は？": `Chrome拡張機能を使ったフォーム送信の方法をご説明します。

**拡張機能のインストール確認**
・画面の「文面作成状況」セクションを確認
・「✓ Chrome拡張機能に接続中」と表示されていればOK
・未表示の場合は拡張機能をインストールしてください

**送信の流れ**
1. リード一覧から送信したい企業を選択（チェック）
2. 「チェック済み企業へ一括送信」ボタンをクリック
3. 拡張機能のキューに追加されます
4. 自動的に1件ずつ処理されます

**進捗の確認方法**
・**実行ログ**: リアルタイムで進捗が表示されます
  例: 「📊 進捗: 3/10件完了（成功 2 / 失敗 1）」
・**拡張機能Popup**: Chrome拡張機能のアイコンをクリックすると詳細が見れます
  - 待機中: これから処理する件数
  - 処理中: 現在処理中（アイコンが回転）
  - 完了: 成功した件数
  - 失敗: 失敗した件数

**重要**: リード表への反映は**キューが全て完了した後**に自動で行われます。
途中で追加送信した場合も、全て完了するまで待つ必要があります。

**ログの削除**
・拡張機能Popupの「キューと失敗ログを削除」ボタンで削除できます
・送信中（待機中・処理中）は削除できません
・全て完了してから削除してください

他にご質問があればお気軽にどうぞ！`,

  送信結果が反映されない: `送信結果がリード表に反映されない場合の対処法をご説明します。

**よくある原因と対処法**

**1. キューがまだ処理中**
・拡張機能のPopupを開いて「待機中」と「処理中」の件数を確認
・0件になるまで待つ必要があります
・**全て完了した後**に自動的にリード表が更新されます

**2. 途中で送信を追加した**
・最初の送信が完了する前に追加送信すると、追加分も含めて**全て完了するまで**反映されません
・例: 5件送信中に10件追加 → 合計15件が全て完了するまで待つ

**3. 実行ログを確認**
・実行ログに「✅ リード表更新完了」と表示されているか確認
・表示されていれば、ブラウザをリロードしてみてください

**4. ブラウザをリロード**
・リード表を表示しているページをF5キーでリロード
・更新された結果が表示されます

**確認のポイント**
・拡張機能Popup: 待機中=0、処理中=0 になっているか
・実行ログ: 「✅ リード表更新完了」が表示されているか
・リード表: 送信回数、最終送信日が更新されているか

それでも反映されない場合は、画面をリロードしてもう一度お試しください。`,
};
